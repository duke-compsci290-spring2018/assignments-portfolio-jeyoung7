<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trello</title>
    <!-- support for this page -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.13/vue.js"></script>
    <link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>


    <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vuefire/1.4.5/vuefire.js"></script>
    <link rel="stylesheet" href="css/todo_list.css">
    <link rel="stylesheet" href="css/form.css">
    <link rel="stylesheet" href="css/modal.css">

    <script src="js/cleantrello.js" async></script>

</head>

<body class="container">
<div id="app">
    <h1>
        Trello
    </h1>
    <div class="board row row-t">
    <input id="color" type="color" value="#ffffff" @change="changeBackground"/>
    <label> Pick a Color </label>
        <div class="addList">
        <input id="listName"  v-model="currentText" />
        <button @click="addList"> add a List </button>
        </div>
    </div>
    <div class="board row row-t">
    <div class="list col-lg-3 col-md-6 col-sm-12" v-for="(list,index) in lists">
        <div>
         <h4 @dblclick = "list.title.edit = true">{{list.title}}<span @click="deleteList(list)">&times;</span></h4>
            <section v-cloak class="new-todo">
                To-do
            </section>
            <section class="main" v-cloak>
                <ul class="todo-list">
                    <!-- items are generated by the contents of the (filtered) todo list data structure -->
                    <li class="todo"
                        :class="{ completed: todo.completed }"
                        v-for="todo,key in list.todos">
                        <div class="view">
                            <!-- checking this marks an item as completed -->
                            <input class="toggle" type="checkbox" @click="checkboxToggle(list,key)">
                            <!-- this text comes from the todo item's text -->
                            <div class="cell" @click="todo.seen= !todo.seen">

                                <label>{{ todo.title }}</label>
                            </div>
                            <p v-if="todo.seen">{{todo.about}}</p>

                            <!-- clicking this removes the todo item from the data structure -->
                            <button class="destroy" @click="removeTodo(list,key)"></button>
                        </div>
                    </li>
                </ul>
            </section>
            <section class="actions" v-cloak>
           <!-- <span class="todo-count"> -->
                <!-- this computed value is displayed -->
            <!--    <strong>{{ remaining(list) }}</strong> {{ remaining | pluralize }} left -->
            <!-- </span> -->
                {{index}}

                <!-- this button removes the completed items from the data structure.
                     It only appears when there are items marked as done. -->
                <modal :show="list.selected" v-bind:index="index" :list="list" @close="list.selected = false"></modal>
                <button id="show-modal" @click="list.selected = true">New Post</button>
                <!-- use the modal component, pass in the prop -->

            </section>
        </div>
    </div>
    </div>
</div>

</body>
<script type="x/template" id="modal-template">
    <transition name="modal">
        <div class="modal-mask" @click="close" v-show="show">
            <div class="modal-container" @click.stop>
                <div class="modal-header">
                    <h3>New Post</h3>
                </div>
                <div class="modal-body">
                    <label class="form-label">
                        Title
                        <input  v-model="title" class="form-control">
                    </label>
                    <label class="form-label">
                        Body
                    </label>

                    <textarea  v-model="about" rows="5" class="form-control"></textarea>
                    <select v-model="selected">
                        Assign
                        <option v-for="user in users" v-bind:value="user.name">
                            {{ user.name }}
                        </option>
                    </select>
                </div>

                <div class="modal-footer text-right">
                    <button class="modal-default-button" @click="savePost">
                        Save
                    </button>
                </div>
            </div>
        </div>
    </transition>
</script>

</html>