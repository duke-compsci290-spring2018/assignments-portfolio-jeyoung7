<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trello</title>
    <!-- support for this page -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.13/vue.js"></script>
    <link type="text/css" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>


    <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vuefire/1.4.5/vuefire.js"></script>
    <link rel="stylesheet" href="css/todo_list.css">
    <link rel="stylesheet" href="css/form.css">
    <link rel="stylesheet" href="css/modal.css">

    <script src="js/cleantrello.js" async></script>

</head>

<body class="container">
<div id="app">
    <div class="modal-mask" @click="close" v-show="signUpModal">
        <form @click.stop>
            <button type="button"  @click="close">
                Close
            </button>
            <div class="field">
                <label class="label">Name</label>
                <div class="control">
                    <input v-model="form.name" class="input" type="text" placeholder="Enter your Name">
                </div>

            </div>
            <div class="field">
                <label class="label">Email</label>
                <div class="control">
                    <input v-model="form.email" class="input" type="text" placeholder="Enter your email">
                </div>
            </div>
            <!-- ROBERT DUVALL -->

            <form id="form" @submit.prevent="storeImage">
                <div>
                    <label for="imgTitle">Title:</label>
                    <input type="text" id="imgTitle" v-model="form.downloadURL">
                    <input type="file" id="files" name="files[]" />
                </div>

            </form>
            <!-- ROBERT DUVALL -->

            <button type="button" id="submit" @click="signUp">
                Sign Up
            </button>

        </form>
    </div>
    <div class="modal-mask" @click="close" v-show="signInModal">
        <form @click.stop>
            <button type="button"  @click="close">
                Close
            </button>
            <div class="field">
                <label class="label">Email</label>
                <div class="control">
                    <input v-model="form.email" class="input" type="text" placeholder="Enter your email">
                </div>
            </div>
            <div class="field">
                <label class="label">Password</label>
                <div class="control">
                    <input type="password" v-model="form.password" class="input" type="text" placeholder="Enter your Password">
                </div>
            </div>
            <button type="button"  @click="signIn">
                Sign In
            </button>

        </form>
    </div>

    <h1>
        Trello
        {{user.name}}
    </h1>
    <button type="submit" id="submit" @click="signUpModal=true">
        Sign Up
    </button>
    <button type="submit" id="submit" @click="signInModal=true">
        Sign In
    </button>
    <div class="board row row-t">
    <input id="color" type="color" value="#ffffff" @change="changeBackground"/>
    <label> Pick a Color </label>
        <div class="addList">
        <input id="listName"  v-model="currentText" />
        <button @click="addList"> add a List </button>
        </div>
    </div>
    <div class="board row row-t">
    <div class="list col-lg-3 col-md-6 col-sm-12" v-for="(list,index) in lists">
        <div>
         <h4 @dblclick = "list.title.edit = true">{{list.title}}<span @click="deleteList(list)">&times;</span></h4>
            <section v-cloak class="new-todo">
                To-do
            </section>
            <section class="main" v-cloak>
                <ul class="todo-list">
                    <!-- items are generated by the contents of the (filtered) todo list data structure -->
                    <li class="todo"
                        :class="{ completed: todo.completed }"
                        v-for="todo,key in list.todos">
                        <div class="view">
                            <!-- checking this marks an item as completed -->
                            <input class="toggle" type="checkbox" @click="checkboxToggle(list,key)">
                            <!-- this text comes from the todo item's text -->
                            <div class="cell" @click="todo.seen= !todo.seen">

                                <label>{{ todo.title }}</label>
                            </div>

                            <div v-if="todo.seen" class="modal-mask" @click="close">
                                <div class="modal-containerInfo" @click.stop>
                                    <div class="modal-header">
                                        <h2>{{todo.title}}</h2>
                                    </div>
                                    <div class="modal-body">
                                        <h3>
                                            Task
                                        </h3>
                                        <label class="form-label">
                                            {{todo.about}}
                                        </label>
                                        <label class="form-label">
                                            <h3>
                                                Assignee
                                            </h3>
                                            <div v-if="todo.assigned.name">
                                                {{todo.assigned.name}}
                                            </div>
                                            <div v-if="!todo.assigned.name">
                                                None
                                            </div>
                                        </label>
                                    </div>
                                    <label class="form-label">
                                        Images
                                    </label>
                                    <div class="container-fluid">

                                    <div class="row row-t">
                                        <div class="col-lg-3 col-md-4 col-sm-6"  v-for="image in todo.images">
                                            <div class="thumbnail">

                                                <img v-bind:src="image.url" alt="missing">
                                                <div class="caption">
                                                    {{ image.title }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                    <div class="modal-footer text-right">
                                        <button class="modal-default-button" @click="closePop(todo)">
                                            Close
                                        </button>
                                    </div>
                                </div>

                            </div>

                            </v-iftransition>

                            <button class="destroy" @click="removeTodo(list,key)"></button>
                        </div>
                    </li>
                </ul>
            </section>

            <section class="actions" v-cloak>
           <!-- <span class="todo-count"> -->
                <!-- this computed value is displayed -->
            <!--    <strong>{{ remaining(list) }}</strong> {{ remaining | pluralize }} left -->
            <!-- </span> -->
                {{index}}

                <!-- this button removes the completed items from the data structure.
                     It only appears when there are items marked as done. -->
                <modal :show="list.selected" v-bind:index="index" :list="list" @close="list.selected = false"></modal>
                <button id="show-modal" @click="list.selected = true">New Post</button>
                <!-- use the modal component, pass in the prop -->

            </section>
        </div>
    </div>
    </div>
</div>

</body>
<script type="x/template" id="modal-template">
    <transition name="modal">
        <div class="modal-mask" @click="close" v-show="show">
            <div class="modal-container" @click.stop>
                <div class="modal-header">
                    <h3>New Post</h3>
                </div>
                <div class="modal-body">
                    <label class="form-label">
                        Title
                        <input  v-model="title" class="form-control">
                    </label>
                    <label class="form-label">
                        Body
                    </label>

                    <textarea  v-model="about" rows="5" class="form-control"></textarea>
                    <label class="form-label">
                        Assign to User
                    </label>
                    <select v-model="assigned">
                        Assign
                        <option v-for="user in users" v-bind:value="user">
                            {{ user.name }}
                        </option>
                    </select>
                </div>
                <label class="form-label">
                    Add Images
                </label>
                <div>
                    <label for="imgTitle">Title:</label>
                    <input type="text" id="imgTitle" v-model="newImageTitle">
                    <input type="file" id="entryFile" name="files[]" />
                    <button class="modal-default-button" @click="addImage">
                        Add Image
                    </button>

                </div>
                <div v-for="image in images" >
                    <label >
                        {{ image.title }}
                    </label>
                </div>
                <div class="modal-footer text-right">
                    <button class="modal-default-button" @click="savePost">
                        Save
                    </button>
                </div>
            </div>
        </div>
    </transition>
</script>

</html>